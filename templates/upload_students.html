<!-- templates/upload_students.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ò–º–ø–æ—Ä—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ | –§–∏–Ω–∞–Ω—Å–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ –†–ò–ù–•</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      background: linear-gradient(-45deg, #003366, #004c99, #0073e6, #003366);
      background-size: 400% 400%;
      animation: gradientShift 10s ease infinite;
      font-family: "Segoe UI", sans-serif;
      color: #fff;
      position: relative;
      overflow-x: hidden;
    }

    /* –ö–ª–µ—Ç–æ—á–∫–∏ –Ω–∞ –∑–∞–¥–Ω–µ–º —Ñ–æ–Ω–µ */
    body::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: 
        linear-gradient(90deg, transparent 95%, rgba(255,255,255,0.1) 100%),
        linear-gradient(0deg, transparent 95%, rgba(255,255,255,0.1) 100%),
        radial-gradient(circle at 20% 80%, rgba(255,255,255,0.05) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.05) 0%, transparent 50%);
      background-size: 50px 50px, 50px 50px, 500px 500px, 500px 500px;
      opacity: 0.4;
      pointer-events: none;
      z-index: 1;
    }

    .top-line {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.6) 20%, 
        rgba(255,255,255,0.8) 50%, 
        rgba(255,255,255,0.6) 80%, 
        transparent 100%);
      z-index: 2;
    }

    .bottom-line {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(255,255,255,0.6) 20%, 
        rgba(255,255,255,0.8) 50%, 
        rgba(255,255,255,0.6) 80%, 
        transparent 100%);
      z-index: 2;
    }

    header {
      background: rgba(0, 0, 0, 0.25);
      backdrop-filter: blur(8px);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      z-index: 3;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    header img {
      height: 50px;
      transition: transform 0.3s ease;
    }

    header img:hover {
      transform: scale(1.05);
    }

    .main-content {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      z-index: 3;
    }

    .dashboard-container {
      width: 100%;
      max-width: 900px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      color: #000;
      animation: fadeIn 0.8s ease;
      border: 1px solid rgba(255, 255, 255, 0.3);
      position: relative;
      z-index: 4;
      margin: 20px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .form-header {
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid rgba(0, 51, 102, 0.2);
      position: relative;
    }

    .form-header::after {
      content: "";
      position: absolute;
      bottom: -2px;
      left: 25%;
      right: 25%;
      height: 2px;
      background: linear-gradient(90deg, 
        transparent 0%, 
        #003366 20%, 
        #0073e6 50%, 
        #003366 80%, 
        transparent 100%);
      z-index: 1;
    }

    .form-title {
      color: #003366;
      font-weight: 700;
      margin-bottom: 1rem;
      font-size: 1.8rem;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
    }

    .form-subtitle {
      color: #666;
      font-size: 1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    .form-card {
      background: white;
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(0, 51, 102, 0.1);
      position: relative;
      overflow: hidden;
    }

    .form-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, 
        #003366 0%, 
        #0073e6 50%, 
        #003366 100%);
      z-index: 1;
    }

    .form-label {
      color: #003366;
      font-weight: 600;
      margin-bottom: 0.5rem;
      display: block;
    }

    .form-control, .form-select {
      border: 2px solid rgba(0, 51, 102, 0.2);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .form-control:focus, .form-select:focus {
      border-color: #0073e6;
      box-shadow: 0 0 0 0.25rem rgba(0, 115, 230, 0.25);
      outline: none;
    }

    .form-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 2px solid rgba(0, 51, 102, 0.1);
    }

    .btn-back {
      background: rgba(0, 51, 102, 0.1);
      border: 2px solid #003366;
      color: #003366;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
    }

    .btn-back:hover {
      background: #003366;
      color: white;
      transform: translateX(-5px);
      box-shadow: 0 5px 15px rgba(0, 51, 102, 0.3);
    }

    .btn-submit {
      background: linear-gradient(135deg, #003366, #0073e6);
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 10px;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .btn-submit:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 51, 102, 0.4);
      background: linear-gradient(135deg, #0073e6, #003366);
    }

    .btn-submit:active {
      transform: translateY(-1px);
    }

    .alert {
      border-radius: 10px;
      border: none;
      margin-bottom: 1.5rem;
      animation: fadeIn 0.5s ease;
    }

    .alert-success {
      background: rgba(76, 175, 80, 0.1);
      color: #2e7d32;
      border-left: 4px solid #4caf50;
    }

    .alert-danger {
      background: rgba(244, 67, 54, 0.1);
      color: #c62828;
      border-left: 4px solid #f44336;
    }

    .alert-warning {
      background: rgba(255, 152, 0, 0.1);
      color: #ef6c00;
      border-left: 4px solid #ff9800;
    }

    .alert-info {
      background: rgba(33, 150, 243, 0.1);
      color: #1565c0;
      border-left: 4px solid #2196f3;
    }

    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .required::after {
      content: " *";
      color: #f44336;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .header-title {
      color: white;
      font-weight: 600;
      font-size: 1.1rem;
      margin: 0;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .btn-logout {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 0.5rem 1.5rem;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }

    .btn-logout:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .footer {
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      text-align: center;
      padding: 20px;
      width: 100%;
      background: rgba(0, 0, 0, 0.2);
      margin-top: auto;
      position: relative;
      z-index: 3;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .footer-text {
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
    }

    .icon {
      font-size: 1.2rem;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ –≤ —Ñ–æ—Ä–º–µ */
    .form-icon {
      position: absolute;
      right: 15px;
      top: 40px;
      color: rgba(0, 51, 102, 0.5);
      font-size: 1.2rem;
      z-index: 2;
    }

    .info-text {
      color: #666;
      font-size: 0.85rem;
      margin-top: 0.25rem;
      padding-left: 0.5rem;
      border-left: 2px solid rgba(0, 51, 102, 0.2);
    }

    /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–º–ø–æ—Ä—Ç–∞ */
    .upload-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: #0073e6;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .file-input-container {
      border: 2px dashed #0073e6;
      border-radius: 10px;
      padding: 2rem;
      text-align: center;
      background: rgba(0, 115, 230, 0.05);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .file-input-container:hover {
      background: rgba(0, 115, 230, 0.1);
      border-color: #003366;
    }

    .file-input-container.dragover {
      background: rgba(0, 115, 230, 0.15);
      border-color: #4caf50;
      transform: scale(1.02);
    }

    .file-info {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(0, 51, 102, 0.05);
      border-radius: 8px;
      border-left: 4px solid #0073e6;
    }

    .file-info.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .format-examples {
      margin-top: 2rem;
      padding: 1.5rem;
      background: rgba(0, 51, 102, 0.05);
      border-radius: 10px;
      border: 1px solid rgba(0, 51, 102, 0.1);
    }

    .example-title {
      color: #003366;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .example-code {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      padding: 1rem;
      font-family: 'Courier New', monospace;
      color: #003366;
      border: 1px solid rgba(0, 51, 102, 0.2);
      overflow-x: auto;
      margin-bottom: 1rem;
    }

    .progress-container {
      display: none;
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(0, 51, 102, 0.05);
      border-radius: 10px;
    }

    .progress-container.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    .progress-bar {
      height: 8px;
      background: linear-gradient(90deg, #003366, #0073e6);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .requirements-list {
      list-style-type: none;
      padding-left: 0;
    }

    .requirements-list li {
      padding: 0.5rem 0;
      color: #666;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .requirements-list li::before {
      content: "‚úì";
      color: #4caf50;
      font-weight: bold;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–∑ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞ */
    .container {
      max-width: 100%;
      padding: 0;
    }

    .card {
      border: none;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      background: rgba(255, 255, 255, 0.98);
      overflow: hidden;
    }

    .card-header {
      background: linear-gradient(90deg, #003366, #0073e6);
      color: white;
      border-bottom: none;
      padding: 1rem 1.5rem;
    }

    .card-body {
      padding: 1.5rem;
    }

    .btn-primary {
      background: linear-gradient(135deg, #003366, #0073e6);
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 51, 102, 0.3);
    }

    .btn-secondary {
      background: rgba(0, 51, 102, 0.1);
      border: 2px solid #003366;
      color: #003366;
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover {
      background: #003366;
      color: white;
      transform: translateX(-3px);
    }

    pre {
      background: rgba(0, 51, 102, 0.05);
      border-radius: 8px;
      padding: 1rem;
      border: 1px solid rgba(0, 51, 102, 0.1);
      font-family: 'Courier New', monospace;
      color: #003366;
      overflow-x: auto;
    }

    @media (max-width: 768px) {
      .dashboard-container {
        padding: 1.5rem;
        margin: 1rem;
      }
      
      .form-actions {
        flex-direction: column;
        gap: 1rem;
      }
      
      .btn-back, .btn-submit {
        width: 100%;
        justify-content: center;
      }
      
      header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
        padding: 1rem;
      }
      
      .logo-container {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .header-actions {
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
      }
      
      .form-card {
        padding: 1.5rem;
      }
      
      .form-title {
        font-size: 1.5rem;
      }
      
      .file-input-container {
        padding: 1.5rem;
      }
      
      .upload-icon {
        font-size: 2.5rem;
      }
      
      .card {
        margin: 0;
      }
    }

    @media (max-width: 480px) {
      .dashboard-container {
        padding: 1rem;
      }
      
      .form-card {
        padding: 1rem;
      }
      
      .file-input-container {
        padding: 1rem;
      }
      
      .upload-icon {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>

  <!-- –í–µ—Ä—Ö–Ω—è—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ª–∏–Ω–∏—è -->
  <div class="top-line"></div>

  <!-- –®–∞–ø–∫–∞ -->
  <header>
    <div class="logo-container">
      <img src="{{ url_for('static', filename='images/logo.png') }}" alt="–†–ò–ù–•">
      <h5 class="header-title">–§–∏–Ω–∞–Ω—Å–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ (–†–ò–ù–•)</h5>
    </div>
    <div class="header-actions">
      <a href="{{ url_for('auth.logout') }}" class="btn-logout">–í—ã–π—Ç–∏</a>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
  <div class="main-content">
    <div class="dashboard-container">
      <div class="form-header">
        <div class="upload-icon">üì§</div>
        <h1 class="form-title">–ò–º–ø–æ—Ä—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞</h1>
        <p class="form-subtitle">
          –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É
        </p>
      </div>

      <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, msg in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              <div class="d-flex align-items-center">
                <span class="icon me-2">
                  {% if category == 'success' %}‚úÖ
                  {% elif category == 'danger' %}‚ùå
                  {% elif category == 'warning' %}‚ö†Ô∏è
                  {% else %}‚ÑπÔ∏è
                  {% endif %}
                </span>
                <div>{{ msg }}</div>
                <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- –§–æ—Ä–º–∞ –∏–º–ø–æ—Ä—Ç–∞ -->
      <div class="form-card">
        <form method="POST" enctype="multipart/form-data" id="uploadForm">
          <div class="form-group">
            <label for="group_id" class="form-label required">–í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–±–Ω—É—é –≥—Ä—É–ø–ø—É</label>
            <div class="position-relative">
              <select class="form-select" id="group_id" name="group_id" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É...</option>
                {% for g in groups %}
                  <option value="{{ g.id }}">
                    {{ g.name }}
                    {% if g.curator %}
                      (–ö—É—Ä–∞—Ç–æ—Ä: {{ g.curator.full_name }})
                    {% endif %}
                  </option>
                {% endfor %}
              </select>
              <span class="form-icon"></span>
            </div>
            <div class="info-text">
              –°—Ç—É–¥–µ–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É
            </div>
          </div>

          <div class="form-group">
            <label class="form-label required">–§–∞–π–ª —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏</label>
            
            <div class="file-input-container" id="dropZone">
              <div class="upload-icon">üìÅ</div>
              <h5 class="text-primary mb-3">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</h5>
              <p class="text-muted mb-3">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: CSV, Excel (.xlsx, .xls)</p>
              
              <div class="mb-3">
                <input type="file" class="form-control d-none" id="file" name="file" accept=".csv,.xlsx,.xls" required>
                <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('file').click()">
                  üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                </button>
              </div>
              
              <div class="file-info" id="fileInfo">
                <div class="d-flex align-items-center justify-content-between">
                  <div>
                    <strong id="fileName"></strong>
                    <small class="d-block text-muted" id="fileSize"></small>
                  </div>
                  <button type="button" class="btn btn-sm btn-outline-danger" onclick="clearFile()">
                    ‚úï
                  </button>
                </div>
              </div>
            </div>
            
            <div class="progress-container" id="progressContainer">
              <div class="d-flex justify-content-between mb-2">
                <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...</span>
                <span id="progressPercent">0%</span>
              </div>
              <div class="progress" style="height: 8px;">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
              </div>
            </div>
            
            <div class="info-text">
              –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB. –§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É "–§–ò–û"
            </div>
          </div>

          <!-- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–π–ª—É -->
          <div class="format-examples">
            <h6 class="example-title">üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ñ–∞–π–ª—É:</h6>
            <ul class="requirements-list">
              <li>–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–§–ò–û" –∏–ª–∏ "full_name"</li>
              <li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: CSV, Excel (.xlsx, .xls)</li>
              <li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB</li>
              <li>–û–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω —Å—Ç—É–¥–µ–Ω—Ç</li>
              <li>–ö–æ–¥–∏—Ä–æ–≤–∫–∞ –¥–ª—è CSV: UTF-8</li>
              <li>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏: "–¢–µ–ª–µ—Ñ–æ–Ω", "–ì—Ä—É–ø–ø–∞"</li>
            </ul>
            
            <h6 class="example-title mt-4">üìÑ –ü—Ä–∏–º–µ—Ä CSV —Ñ–∞–π–ª–∞:</h6>
            <div class="example-code">
–§–ò–û,–¢–µ–ª–µ—Ñ–æ–Ω
–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á,+79001234567
–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á,+79007654321
–°–∏–¥–æ—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞,+79009876543
            </div>
            
            <h6 class="example-title mt-4">üìä –ü—Ä–∏–º–µ—Ä Excel —Ñ–∞–π–ª–∞:</h6>
            <div class="example-code">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        –§–ò–û          ‚îÇ      –¢–µ–ª–µ—Ñ–æ–Ω        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á‚îÇ +79001234567        ‚îÇ
‚îÇ –ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á‚îÇ +79007654321        ‚îÇ
‚îÇ –°–∏–¥–æ—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥. ‚îÇ +79009876543        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            </div>
          </div>

          <div class="form-actions">
            <a href="{{ url_for('dashboard.students') }}" class="btn-back">
              <span class="icon">‚Üê</span>
              –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É
            </a>
            <button type="submit" class="btn-submit" id="submitBtn">
              <span class="icon">üì§</span>
              –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
            </button>
          </div>
        </form>
      </div>

      <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
      <div class="mt-4 text-center">
        <small class="text-muted">
          <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> 
          –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ —Å—Ç—É–¥–µ–Ω—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –≥—Ä—É–ø–ø—É.
          –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞.
        </small>
      </div>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—è—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ª–∏–Ω–∏—è -->
  <div class="bottom-line"></div>

  <!-- –§—É—Ç–µ—Ä -->
  <div class="footer">
    <div class="footer-text">
      ¬© 2025–≥. –§–∏–Ω–∞–Ω—Å–æ–≤–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π –∫–æ–ª–ª–µ–¥–∂ (–†–ò–ù–•)
    </div>
    <div class="mt-2" style="font-size: 0.8rem; color: rgba(255, 255, 255, 0.6);">
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
    const fileInput = document.getElementById('file');
    const fileInfo = document.getElementById('fileInfo');
    const fileName = document.getElementById('fileName');
    const fileSize = document.getElementById('fileSize');
    const dropZone = document.getElementById('dropZone');
    const progressContainer = document.getElementById('progressContainer');
    const progressBar = document.getElementById('progressBar');
    const progressPercent = document.getElementById('progressPercent');
    const submitBtn = document.getElementById('submitBtn');
    const uploadForm = document.getElementById('uploadForm');

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
    fileInput.addEventListener('change', function(e) {
      if (this.files && this.files[0]) {
        updateFileInfo(this.files[0]);
      }
    });

    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ
    function updateFileInfo(file) {
      fileName.textContent = file.name;
      fileSize.textContent = formatFileSize(file.size);
      fileInfo.classList.add('show');
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
      const maxSize = 10 * 1024 * 1024; // 10MB
      if (file.size > maxSize) {
        showAlert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10MB', 'danger');
        clearFile();
        return;
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–∞
      const validExtensions = ['.csv', '.xlsx', '.xls'];
      const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
      if (!validExtensions.includes(fileExtension)) {
        showAlert('–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSV –∏–ª–∏ Excel —Ñ–∞–π–ª—ã.', 'danger');
        clearFile();
        return;
      }
    }

    // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Ñ–∞–π–ª–∞
    function clearFile() {
      fileInput.value = '';
      fileInfo.classList.remove('show');
    }

    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Drag & Drop —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, preventDefaults, false);
    });

    function preventDefaults(e) {
      e.preventDefault();
      e.stopPropagation();
    }

    ['dragenter', 'dragover'].forEach(eventName => {
      dropZone.addEventListener(eventName, highlight, false);
    });

    ['dragleave', 'drop'].forEach(eventName => {
      dropZone.addEventListener(eventName, unhighlight, false);
    });

    function highlight() {
      dropZone.classList.add('dragover');
    }

    function unhighlight() {
      dropZone.classList.remove('dragover');
    }

    dropZone.addEventListener('drop', handleDrop, false);

    function handleDrop(e) {
      const dt = e.dataTransfer;
      const files = dt.files;
      
      if (files.length > 0) {
        fileInput.files = files;
        updateFileInfo(files[0]);
      }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
    uploadForm.addEventListener('submit', function(e) {
      const groupId = document.getElementById('group_id').value;
      const file = fileInput.files[0];
      
      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!groupId) {
        e.preventDefault();
        showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–±–Ω—É—é –≥—Ä—É–ø–ø—É', 'warning');
        document.getElementById('group_id').focus();
        return false;
      }
      
      if (!file) {
        e.preventDefault();
        showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª', 'warning');
        return false;
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<span class="icon">‚è≥</span> –û–±—Ä–∞–±–æ—Ç–∫–∞...';
      progressContainer.classList.add('show');
      
      // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
      simulateProgress();
      
      // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç XMLHttpRequest –∏–ª–∏ Fetch API
      // –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
      
      return true;
    });

    // –°–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    function simulateProgress() {
      let width = 0;
      const interval = setInterval(() => {
        if (width >= 100) {
          clearInterval(interval);
          progressPercent.textContent = '100%';
          progressBar.style.width = '100%';
          
          // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
          setTimeout(() => {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<span class="icon">üì§</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª';
          }, 1000);
        } else {
          width += Math.random() * 10;
          if (width > 100) width = 100;
          progressPercent.textContent = Math.round(width) + '%';
          progressBar.style.width = width + '%';
        }
      }, 100);
    }

    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    function showAlert(message, type = 'info') {
      const alertDiv = document.createElement('div');
      alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
      alertDiv.innerHTML = `
        <div class="d-flex align-items-center">
          <span class="icon me-2">${type === 'warning' ? '‚ö†Ô∏è' : type === 'danger' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è'}</span>
          <div>${message}</div>
          <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert"></button>
        </div>
      `;
      
      // –í—Å—Ç–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ñ–æ—Ä–º–æ–π
      const formCard = document.querySelector('.form-card');
      formCard.parentNode.insertBefore(alertDiv, formCard);
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
      setTimeout(() => {
        if (alertDiv.parentNode) {
          const bsAlert = new bootstrap.Alert(alertDiv);
          bsAlert.close();
        }
      }, 5000);
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      const dashboardContainer = document.querySelector('.dashboard-container');
      dashboardContainer.style.opacity = '0';
      dashboardContainer.style.transform = 'translateY(30px) scale(0.95)';
      
      setTimeout(() => {
        dashboardContainer.style.transition = 'all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
        dashboardContainer.style.opacity = '1';
        dashboardContainer.style.transform = 'translateY(0) scale(1)';
      }, 200);
      
      // –ê–Ω–∏–º–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–æ—Ä–º—ã
      const formGroups = document.querySelectorAll('.form-group');
      formGroups.forEach((group, index) => {
        group.style.opacity = '0';
        group.style.transform = 'translateX(-20